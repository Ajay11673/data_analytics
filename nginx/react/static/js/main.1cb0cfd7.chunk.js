(this["webpackJsonpfrontend-react"]=this["webpackJsonpfrontend-react"]||[]).push([[0],{364:function(e,t,a){},365:function(e,t,a){},429:function(e,t,a){"use strict";a.r(t);var n,s,o,r,i,l=a(0),c=a.n(l),d=a(15),u=a.n(d),h=(a(364),a(29)),g=a(76),m=(a(365),a(33)),b=a(34),j=a(36),p=a(35),f=a(6),O=function(e){Object(j.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).state={userData:null!=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):JSON.parse(sessionStorage.getItem("user")),fileName:"",file:""},console.log(void 0===e.state.userData.data_source[0]),e}return Object(b.a)(a,[{key:"handleFileNameChanged",value:function(e){this.setState({fileName:e.target.value})}},{key:"handleFileChanged",value:function(e){this.setState({file:e.target.files[0]});var t=document.getElementById("fileName");t&&(t.value=e.target.files[0].name.split(".")[0],this.setState({fileName:e.target.files[0].name.split(".")[0]})),console.log(e.target.files[0].name)}},{key:"handleFormSubmit",value:function(){if(""!=this.state.fileName.trim()&&void 0!=this.state.file&&0!==this.state.file.length)if(this.state.fileName.trim().length>50)alert("filename is too big ");else{var e=document.getElementById("btnSubmit");e.innerHTML="procressing",e.disabled=!0;var t={id:this.state.userData.user_id},a=this.state.fileName,n=this.state.file;console.log(n);var s=new FormData;s.append("file",n),s.append("fileName",a),s.append("userData",JSON.stringify(t));var o=null!=localStorage.getItem("token")?localStorage.getItem("token"):sessionStorage.getItem("token");console.log(o),console.log(t),fetch("/api/backend/addDataSource",{method:"POST",headers:{auth:o},body:s}).then((function(t){e.classList.remove("btn-primary"),t.ok?t.json().then((function(t){"INVALID"!=t.data?(console.log(t),e.disabled=!1,e.innerHTML="success",e.classList.add("btn-success"),null!=localStorage.getItem("user")?localStorage.setItem("user",JSON.stringify(t)):sessionStorage.setItem("user",JSON.stringify(t)),setTimeout((function(){e.innerHTML="save",e.classList.remove("btn-success"),e.classList.add("btn-primary")}),1e3)):(console.log(t),e.innerHTML="Token expired file not saved",e.classList.add("btn-warning"),window.confirm("MESSAGE: your file is not uploaded\nNOTE: token expired re-login")&&(sessionStorage.clear(),localStorage.clear(),window.location.href="/"))})):(e.classList.add("btn-danger"),e.disabled=!1,e.innerHTML="failed",setTimeout((function(){e.innerHTML="save",e.classList.remove("btn-danger"),e.classList.add("btn-primary")}),1e3))}))}else alert("Invalid Data")}},{key:"render",value:function(){var e=this;if(null!=localStorage.getItem("user")||null!=sessionStorage.getItem("user"))return Object(f.jsx)("div",{children:Object(f.jsxs)("div",{className:"container mt-5",children:[Object(f.jsx)("h3",{children:"Add new Data source"}),Object(f.jsxs)("div",{className:"form-group",children:[Object(f.jsx)("label",{children:"Data Source name"}),Object(f.jsx)("input",{name:"filename",id:"fileName",className:"form-control",placeholder:"Data Source name",onChange:this.handleFileNameChanged.bind(this)})]}),Object(f.jsx)("br",{}),Object(f.jsxs)("div",{className:"form-group",children:[Object(f.jsx)("label",{children:"Datasource"}),Object(f.jsx)("input",{name:"file",type:"file",className:"form-control",onChange:this.handleFileChanged.bind(this)})]}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("button",{type:"submit",id:"btnSubmit",className:"btn btn-primary",onClick:function(){return e.handleFormSubmit()},children:"save"})]})});window.location.href="/"}}]),a}(l.Component),x=function(e){Object(j.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).state={username:"",password:"",role:"GUEST"},e}return Object(b.a)(a,[{key:"handleUserNameChanged",value:function(e){this.setState({username:e.target.value})}},{key:"handlePasswordChanged",value:function(e){this.setState({password:e.target.value})}},{key:"handleCheckbox",value:function(e){this.state.isChecked=e.target.checked}},{key:"handleFormSubmit",value:function(){var e=this.state.username,t=this.state.password,a=this.state.role;if(""!=e.trim()&&""!=t.trim()&&""!=a.trim()){var n=document.getElementById("btnAddUser");n.innerHTML="procressing",console.log("Log in"),n.disabled=!0;var s={username:e,password:t,role:a};console.log(e+" ,"+t+" ,"+a);var o=null!=localStorage.getItem("token")?localStorage.getItem("token"):sessionStorage.getItem("token");fetch("/api/backend/signup",{method:"POST",body:JSON.stringify(s),headers:{auth:o}}).then((function(e){e.ok?(n.disabled=!1,n.innerHTML="success",n.classList.remove("btn-primary"),n.classList.add("btn-success"),setTimeout((function(){n.innerHTML="Add user",n.classList.remove("btn-success"),n.classList.add("btn-primary")}),1e3)):(n.disabled=!1,n.innerHTML="failed",n.classList.remove("btn-primary"),n.classList.add("btn-danger"),setTimeout((function(){n.innerHTML="Add user",n.classList.remove("btn-danger"),n.classList.add("btn-primary")}),1e3))}))}else alert("invalid data")}},{key:"handleSelectChange",value:function(e){this.setState({role:e.target.value})}},{key:"render",value:function(){var e=this;if(null!=localStorage.getItem("user")||null!=sessionStorage.getItem("user"))return Object(f.jsx)("div",{children:Object(f.jsxs)("div",{className:"container mt-5",children:[Object(f.jsx)("h3",{children:"Add new user"}),Object(f.jsxs)("div",{className:"form-group",children:[Object(f.jsx)("label",{children:"username"}),Object(f.jsx)("input",{type:"username",className:"form-control",placeholder:"Username",onChange:this.handleUserNameChanged.bind(this)})]}),Object(f.jsx)("br",{}),Object(f.jsxs)("div",{className:"form-group",children:[Object(f.jsx)("label",{children:"password"}),Object(f.jsx)("input",{type:"password",className:"form-control",placeholder:"Password",autoComplete:"new-password",onChange:this.handlePasswordChanged.bind(this)})]}),Object(f.jsx)("br",{}),Object(f.jsxs)("div",{className:"form-group",children:[Object(f.jsx)("label",{children:"Role"}),Object(f.jsxs)("select",{className:"form-control",name:"userList",id:"selectUser",onChange:this.handleSelectChange.bind(this),children:[Object(f.jsx)("option",{value:"GUEST",children:"GUEST"}),Object(f.jsx)("option",{value:"ADMIN",children:"ADMIN"})]})]}),Object(f.jsx)("br",{}),Object(f.jsx)("button",{type:"submit",id:"btnAddUser",className:"btn btn-primary",onClick:function(){return e.handleFormSubmit()},children:"Add user"})]})});window.location.href="/"}}]),a}(l.Component),S=a(99),v=a.n(S),y=function(e){Object(j.a)(a,e);var t=Object(p.a)(a);function a(e){var n,s=e.col,o=e.recCount,r=e.id,i=e.fileName,l=e.page;return Object(m.a)(this,a),(n=t.call(this,{col:s,recCount:o,id:r,fileName:i,page:l})).tableRef=c.a.createRef(),n.state={columns:s,recordCount:o,id:r,filename:i,isFirst:!0,page:null!=parseInt(sessionStorage.getItem("page"))?parseInt(sessionStorage.getItem("page")):0},console.log("From table constructor"),console.log(n.state),n}return Object(b.a)(a,[{key:"componentDidUpdate",value:function(e){this.props.id!=e.id&&(console.log("table update"),console.log("props"),console.log(this.props),console.log("prevProps"),console.log(e),this.setState({columns:this.props.col,recordCount:this.props.recCount,id:this.props.id,filename:this.props.fileName,isFirst:!0}),this.tableRef.current.onQueryChange(),console.log(this.state))}},{key:"componentWillUnmount",value:function(){sessionStorage.setItem("page",this.state.page),console.log("unmounting... page="+sessionStorage.getItem("page"))}},{key:"render",value:function(){var e=this;return Object(f.jsx)("div",{children:Object(f.jsx)(v.a,{tableRef:this.tableRef,id:"materialtable",options:{search:!1},title:this.state.filename,columns:this.state.columns,data:function(t){return new Promise((function(a,n){if(e.state.isFirst){var s=null!=parseInt(sessionStorage.getItem("page"))?parseInt(sessionStorage.getItem("page")):0;console.log("session page: "+s),t.page=0==s?0:s,e.state.isFirst=!1,console.log("isFirst ran")}else e.state.page=t.page,console.log(t.page+", "+e.state.page);console.log(t);var o=null!=localStorage.getItem("token")?localStorage.getItem("token"):sessionStorage.getItem("token");fetch("/api/backend/getPagniatedDataSource?dataSourceId=".concat(e.state.id,"&page=").concat(t.page+1,"&recordCount=").concat(t.pageSize),{method:"GET",headers:{auth:o}}).then((function(n){return n.json().then((function(n){if(console.log(t.page),"INVALID"==n.data)return console.log("yes"),void(window.confirm("MESSAGE: your file is not uploaded\nNOTE: token expired re-login")&&(sessionStorage.clear(),localStorage.clear(),window.location.href="/"));a({data:n,page:t.page,totalCount:e.state.recordCount})}))}))}))}})})}}]),a}(l.Component),I=function(e){Object(j.a)(a,e);var t=Object(p.a)(a);function a(e){var n;if(Object(m.a)(this,a),n=t.call(this,e),null!=sessionStorage.getItem("table")){console.log("Dashboard constructor");var s=JSON.parse(sessionStorage.getItem("table"));n.state={userData:null!=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):JSON.parse(sessionStorage.getItem("user")),dataSoure:null!=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).data_source:JSON.parse(sessionStorage.getItem("user")).data_source,columns:s.columns,recordCount:s.recordCount,id:s.id,filename:s.filename,createdDate:s.createdDate,creatorName:s.creatorName,allowed_to:s.allowed_to,user_id:null!=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).user_id:JSON.parse(sessionStorage.getItem("user")).user_id}}else n.state={userData:null!=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):JSON.parse(sessionStorage.getItem("user")),dataSoure:null!=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).data_source:JSON.parse(sessionStorage.getItem("user")).data_source,columns:[],recordCount:0,id:0,filename:"",createdDate:"",creatorName:"",allowed_to:-1,user_id:null!=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).user_id:JSON.parse(sessionStorage.getItem("user")).user_id};return n}return Object(b.a)(a,[{key:"componentDidUpdate",value:function(){console.log("dashboard update")}},{key:"handleDataSelected",value:function(e){var t=this,a=document.getElementById("message");a&&(a.style.display="block");var n=document.getElementById("tableData");n&&(n.style.display="none");var s=document.getElementById("noDataSelected");s&&(s.style.display="none"),console.log("data"),sessionStorage.setItem("page",0);var o=null!=localStorage.getItem("token")?localStorage.getItem("token"):sessionStorage.getItem("token");fetch("/api/backend/getDataSourceHeaders",{method:"POST",headers:{auth:o},body:JSON.stringify(e)}).then((function(o){return o.json().then((function(o){"INVALID"!=o.data?(n&&(n.style.display="block"),a&&(a.style.display="none"),s&&(s.style.display="block"),t.setState({columns:o,filename:e.file_name,id:e.id,recordCount:e.row_count,createdDate:e.created_date,creatorName:e.created_by,allowed_to:e.allowed_to}),sessionStorage.setItem("table",JSON.stringify(t.state))):window.confirm("MESSAGE: your file is not uploaded\nNOTE: token expired re-login")&&(sessionStorage.clear(),localStorage.clear(),window.location.href="/")}))}))}},{key:"handleRemove",value:function(e){var t=this,a=document.getElementById("message");a&&(a.style.display="block");var n=document.getElementById("tableData");n&&(n.style.display="none");var s=document.getElementById("noDataSelected");s&&(s.style.display="none");var o=null!=localStorage.getItem("token")?localStorage.getItem("token"):sessionStorage.getItem("token");fetch("/api/backend/deleteDataSource?id=".concat(e,"&user_id=").concat(this.state.user_id),{method:"GET",headers:{auth:o}}).then((function(e){return e.json().then((function(e){if("INVALID"==e.data)return console.log("yes"),void(window.confirm("MESSAGE: your file is not uploaded\nNOTE: token expired re-login")&&(sessionStorage.clear(),localStorage.clear(),window.location.href="/"));localStorage.getItem("user"),localStorage.setItem("user",JSON.stringify(e)),t.setState({userData:e,dataSoure:e.data_source,recordCount:0,id:0,filename:"",createdDate:"",creatorName:"",allowed_to:-1}),sessionStorage.removeItem("table"),console.log("changing it to block "+s+", "+a),s&&(console.log("changing it to block"),s.style.display="block"),a&&(a.style.display="none")}))}))}},{key:"handleShow",value:function(e,t){var a=this,n=document.getElementById("visibility");n&&(n.style.cursor="progress");var s=null!=localStorage.getItem("token")?localStorage.getItem("token"):sessionStorage.getItem("token");fetch("/api/backend/updateDataSourceVisibility?id=".concat(e,"&value=").concat(t),{method:"GET",headers:{auth:s}}).then((function(e){return e.json().then((function(e){console.log(e),"INVALID"!=e.data?(n&&(n.style.cursor="pointer"),e.data&&a.setState({allowed_to:t})):window.confirm("MESSAGE: your file is not uploaded\nNOTE: token expired re-login")&&(sessionStorage.clear(),localStorage.clear(),window.location.href="/")}))}))}},{key:"render",value:function(){var e=this;if(null!=localStorage.getItem("user")||null!=sessionStorage.getItem("user"))return Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{style:{background:"#000"},children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("span",{style:{color:"#fff"},children:"Data Sources"}),void 0===this.state.dataSoure[0]?Object(f.jsx)("div",{}):Object(f.jsx)(g.b,{className:"btn btn-primary",style:{float:"right"},to:"/add-data",children:"Add new dataSource"})]}),Object(f.jsx)("br",{}),this.state.dataSoure.map((function(t){return Object(f.jsx)("button",{onClick:function(){return e.handleDataSelected(t)},style:{background:"none",border:"none",color:"#fff",cursor:"pointer"},children:t.file_name})}))]}),Object(f.jsx)("div",{id:"message",style:{position:"absolute",width:"100%",height:"78vh",display:"none",background:"rgb(0,0,0,0.3)"},children:Object(f.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"70vh"},children:Object(f.jsxs)("center",{children:[Object(f.jsx)("span",{children:"Loading"}),Object(f.jsx)("br",{})]})})}),void 0===this.state.dataSoure[0]?Object(f.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"70vh"},children:Object(f.jsxs)("center",{children:[Object(f.jsx)("span",{children:"No data Available"}),Object(f.jsx)("br",{}),Object(f.jsx)(g.b,{className:"btnAsText",style:{color:"black"},to:"/add-data",children:"Add Data"})]})}):void 0==this.state.columns[0]?Object(f.jsx)("div",{id:"noDataSelected",style:{display:"flex",justifyContent:"center",alignItems:"center",height:"70vh"},children:Object(f.jsxs)("center",{children:[Object(f.jsx)("span",{children:"No data Selected"}),Object(f.jsx)("br",{})]})}):Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{id:"noDataSelected",style:{position:"absolute",width:"100%",height:"78vh",display:"block"},children:Object(f.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"70vh"},children:Object(f.jsxs)("center",{children:[Object(f.jsx)("span",{children:"No data Selected"}),Object(f.jsx)("br",{})]})})}),Object(f.jsxs)("div",{id:"tableData",children:[Object(f.jsx)(y,{col:this.state.columns,recCount:this.state.recordCount,id:this.state.id,fileName:this.state.filename}),Object(f.jsxs)("div",{style:{padding:"30px"},children:[Object(f.jsx)("table",{children:Object(f.jsxs)("tbody",{children:[Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:"Data Added By:"}),Object(f.jsxs)("tr",{children:[" \xa0",this.state.creatorName]})]}),Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:"Data Added date:"}),Object(f.jsxs)("tr",{children:[" \xa0",this.state.createdDate]})]})]})}),"ADMIN"===this.state.userData.role?Object(f.jsxs)("div",{children:[Object(f.jsx)("h6",{children:"Actions"}),Object(f.jsxs)("ol",{children:[Object(f.jsxs)("li",{children:[Object(f.jsx)("button",{className:"btnAsText",onClick:function(){return e.handleRemove(e.state.id)},children:"Remove"})," the dataSource"]}),Object(f.jsx)("br",{}),0==this.state.allowed_to?Object(f.jsxs)("li",{children:[Object(f.jsx)("button",{id:"visibility",className:"btnAsText",onClick:function(){return e.handleShow(e.state.id,1)},children:"hide"})," the data to guests"]}):Object(f.jsxs)("li",{children:[Object(f.jsx)("button",{id:"visibility",className:"btnAsText",onClick:function(){return e.handleShow(e.state.id,0)},children:"Show"})," the data to guests"]})]})]}):Object(f.jsxs)("div",{children:[Object(f.jsx)("h6",{children:"Actions"}),Object(f.jsxs)("ol",{children:[Object(f.jsxs)("li",{children:[Object(f.jsx)("button",{className:"btnAsText",onClick:function(){return e.handleRemove(e.state.id)},children:"Remove"})," the dataSource"]}),Object(f.jsx)("br",{})]})]})]})]})]})]});window.location.href="/"}}]),a}(l.Component),k=function(e){Object(j.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(m.a)(this,a),e=t.call(this),console.log("Log in"),e.state={username:"",password:"",isChecked:!1,http:""},e}return Object(b.a)(a,[{key:"handleUserNameChanged",value:function(e){this.setState({username:e.target.value})}},{key:"handlePasswordChanged",value:function(e){this.setState({password:e.target.value})}},{key:"handleCheckbox",value:function(e){this.state.isChecked=e.target.checked}},{key:"handleFormSubmit",value:function(e){var t=this;console.log("Log in"),sessionStorage.clear(),localStorage.clear();var a=document.getElementById("btnSubmit");a.innerHTML="procressing",a.disabled=!0;var n=this.state.username,s=this.state.password;if(""!=n.trim()&&""!=s.trim()){var o={username:n,password:s};console.log(n+" ,"+s),fetch("/api/backend/login",{method:"POST",body:JSON.stringify(o)}).then((function(e){a.classList.remove("btn-dark"),e.ok?e.json().then((function(e){console.log(e),localStorage.clear(),sessionStorage.clear(),localStorage.setItem("role",JSON.parse(e.data).role),console.log(JSON.parse(e.data).role),t.state.isChecked?(console.log("saved in local"),localStorage.setItem("user",e.data),localStorage.setItem("token",e.token+"")):(console.log("saved in session"),sessionStorage.setItem("user",e.data),sessionStorage.setItem("token",e.token+"")),t.props.history.push("/dashboard")})):(a.classList.add("btn-danger"),a.disabled=!1,a.innerHTML="failed",setTimeout((function(){a.innerHTML="Login",a.classList.remove("btn-danger"),a.classList.add("btn-dark")}),1e3))}))}else alert("invalid data")}},{key:"render",value:function(){var e=this;if(null==localStorage.getItem("user")||null==sessionStorage.getItem("user"))return Object(f.jsx)("div",{children:Object(f.jsxs)("div",{className:"container mt-5",children:[Object(f.jsx)("h3",{children:"Data Analystic"}),Object(f.jsx)("h3",{children:"Log-in"}),Object(f.jsxs)("div",{className:"form-group",children:[Object(f.jsx)("label",{children:"username"}),Object(f.jsx)("input",{type:"username",className:"form-control",placeholder:"Username",value:this.state.username,onChange:this.handleUserNameChanged.bind(this)})]}),Object(f.jsx)("br",{}),Object(f.jsxs)("div",{className:"form-group",children:[Object(f.jsx)("label",{children:"password"}),Object(f.jsx)("input",{type:"password",className:"form-control",placeholder:"Password",value:this.state.password,onChange:this.handlePasswordChanged.bind(this)})]}),Object(f.jsx)("br",{}),Object(f.jsx)("div",{className:"form-group",children:Object(f.jsxs)("div",{className:"custom-control custom-checkbox",children:[Object(f.jsx)("input",{type:"checkbox",className:"custom-control-input",id:"customCheck1",value:this.state.isChecked,onChange:this.handleCheckbox.bind(this)}),Object(f.jsx)("span",{children:" "}),Object(f.jsx)("label",{className:"custom-control-label",htmlFor:"customCheck1",children:"Remember me"})]})}),Object(f.jsx)("br",{}),Object(f.jsx)("button",{type:"submit",id:"btnSubmit",className:"btn btn-dark btn-lg btn-block",onClick:function(){return e.handleFormSubmit()},children:"Log in"})]})});this.props.history.push("/dashboard")}}]),a}(l.Component),N=a(125),w=a(126),C=w.a.nav(n||(n=Object(N.a)(["\n  background: #000;\n  height: 65px;\n  display: flex;\n  justify-content: flex-start;\n  padding: 0.5rem;\n  z-index: 12;\n  /* Third Nav */\n  /* justify-content: flex-start; */\n"]))),D=Object(w.a)(g.c)(s||(s=Object(N.a)(["\n  color: #878;\n  display: flex;\n  align-items: center;\n  text-decoration: none;\n  padding: 0 1rem;\n  height: 100%;\n  cursor: pointer;\n  &.active {\n    color: #fff;\n  }\n"]))),L=w.a.div(o||(o=Object(N.a)(["\n  display: flex;\n  align-items: center;\n\n  margin-left: 24px;\n  /* Second Nav */\n  /* margin-right: 24px; */\n  /* Third Nav */\n\n  width: 100vw;\n  white-space: nowrap; \n\n  @media screen and (max-width: 768px) {\n    display: none;\n  }\n"]))),T=w.a.nav(r||(r=Object(N.a)(["\n  display: flex;\n  align-items: center;\n  /*margin-right: 24px;*/\n  /* Third Nav */\n  justify-content: flex-end;\n  width: 100vw; \n  @media screen and (max-width: 768px) {\n    display: none;\n  }\n"]))),A=Object(w.a)(g.c)(i||(i=Object(N.a)(["\n  border-radius: 4px;\n  background: #428bca;\n  padding: 10px 22px;\n  color: #fff;\n  outline: none;\n  border: none;\n  cursor: pointer;\n  transition: all 0.2s ease-in-out;\n  text-decoration: none;\n  /* Second Nav */\n  margin-left: 24px;\n  &:hover {\n    transition: all 0.2s ease-in-out;\n    background: #fff;\n    color: #000;\n  }\n"]))),E=function(){return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)(C,{children:[Object(f.jsx)(D,{to:"#",children:"Data_Analytics"}),Object(f.jsxs)(L,{children:[Object(f.jsx)(D,{to:"/dashboard",activeStyle:!0,children:"Dashboard"}),"ADMIN"==localStorage.getItem("role")?Object(f.jsx)(D,{to:"/settings",activeStyle:!0,children:"Settings"}):Object(f.jsx)("div",{})]}),Object(f.jsx)(T,{children:Object(f.jsx)(A,{to:"/profile",children:"Profile"})})]})})},J=function(e){Object(j.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).state={userData:null!=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):JSON.parse(sessionStorage.getItem("user"))},e}return Object(b.a)(a,[{key:"handleLogout",value:function(){localStorage.clear(),sessionStorage.clear(),window.location.href="/"}},{key:"render",value:function(){var e=this;if(null!=localStorage.getItem("user")||null!=sessionStorage.getItem("user"))return Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{style:{background:"#000",padding:"10px"},children:[Object(f.jsx)("div",{children:Object(f.jsx)("span",{style:{color:"#fff"},children:"Profile"})}),Object(f.jsx)("button",{onClick:function(){return e.handleLogout()},className:"btn btn-primary",children:"Logout"}),Object(f.jsx)("br",{})]}),Object(f.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"70vh"},children:Object(f.jsx)("table",{children:Object(f.jsxs)("tbody",{children:[Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:"user id"}),Object(f.jsxs)("td",{children:["\xa0",this.state.userData.user_id]})]}),Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:"User name"}),Object(f.jsxs)("td",{children:["\xa0",this.state.userData.user_name]})]}),Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:"role"}),Object(f.jsxs)("td",{children:["\xa0",this.state.userData.role]})]}),Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:"added date"}),Object(f.jsxs)("td",{children:["\xa0",this.state.userData.added_date]})]})]})})})]});window.location.href="/"}}]),a}(l.Component),_=function(e){Object(j.a)(a,e);var t=Object(p.a)(a);function a(e){var n,s=e.col;return Object(m.a)(this,a),(n=t.call(this,{col:s})).state={columns:s,isFirst:!0,page:parseInt(sessionStorage.getItem("userPage"))>=0?parseInt(sessionStorage.getItem("userPage")):0},console.log(n.state),n}return Object(b.a)(a,[{key:"componentWillUnmount",value:function(){sessionStorage.setItem("userPage",this.state.page),console.log("unmounting... page="+sessionStorage.getItem("userPage"))}},{key:"render",value:function(){var e=this;return Object(f.jsx)("div",{children:Object(f.jsx)(v.a,{options:{search:!1},title:"Users",columns:this.state.columns,data:function(t){return new Promise((function(a,n){if(e.state.isFirst){var s=parseInt(sessionStorage.getItem("userPage"))>=0?parseInt(sessionStorage.getItem("userPage")):0;console.log(sessionStorage.getItem("page")),console.log("session user-page: "+s),t.page=s,e.state.isFirst=!1}else e.state.page=t.page,console.log(t.page+", "+e.state.page);var o=null!=localStorage.getItem("token")?localStorage.getItem("token"):sessionStorage.getItem("token");fetch("/api/backend/getAllUsers?page=".concat(t.page+1,"&rowCount=").concat(t.pageSize),{method:"GET",headers:{auth:o}}).then((function(e){return e.json().then((function(e){if(console.log(e),"INVALID"==e.data)return console.log("yes"),void(window.confirm("MESSAGE: your file is not uploaded\nNOTE: token expired re-login")&&(sessionStorage.clear(),localStorage.clear(),window.location.href="/"));var n;console.log(e.data.length+", "+t.pageSize),console.log(e),n=1!=e.data.length?e.data.map((function(e){return JSON.parse(e)})):[e.data].map((function(t){return console.log("else"),console.log(e),JSON.parse(t)})),a({data:n,page:t.page,totalCount:e.size})}))}))}))}})})}}]),a}(l.Component),M=function(e){Object(j.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).state={usersData:{},columns:[{title:"user id",field:"userId"},{title:"username",field:"userName"},{title:"role",field:"role"},{title:"added date",field:"addedDate"}]},e}return Object(b.a)(a,[{key:"render",value:function(){if(null==localStorage.getItem("user")&&null==sessionStorage.getItem("user"))window.location.href="/";else{if("ADMIN"==(null!=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):JSON.parse(sessionStorage.getItem("user"))).role)return Object(f.jsx)("div",{children:Object(f.jsxs)("div",{style:{background:"#000"},children:[Object(f.jsxs)("div",{children:[Object(f.jsx)(g.b,{className:"btn btn-primary",to:"/add-users",style:{float:"right"},children:"Create new user"}),Object(f.jsx)("br",{}),Object(f.jsx)("span",{style:{color:"#fff"},children:"Users"})]}),Object(f.jsx)(_,{col:this.state.columns})]})});window.location.href="/dashboard"}}}]),a}(l.Component),P=a(239),F=a.n(P),U=a(346),H=function(e){Object(j.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={columns:[],recordCount:0,id:e.location.load.data.id,filename:e.location.load.data.file_name},console.log("props"),console.log(e),n}return Object(b.a)(a,[{key:"componentDidUpdate",value:function(e){console.log("update:"),console.log("prev: "+e.match.params.id),console.log("current: "+this.props.match.params.id),e.match.params.id!=this.props.match.params.id&&(this.setState({id:this.props.location.load.data.id,filename:this.props.location.load.data.file_name}),this.componentDidMount(),this.render())}},{key:"componentDidMount",value:function(){var e=Object(U.a)(F.a.mark((function e(){var t=this;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8080/demo/getDataSourceHeaders",{method:"POST",body:JSON.stringify(this.props.location.load.data)}).then((function(e){return e.json().then((function(e){console.log(e),t.setState({columns:e,recordCount:1e3}),console.log(t.state.id)}))}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(f.jsx)("div",{className:"container",style:{marginTop:"10px"},children:Object(f.jsx)(v.a,{options:{search:!1},title:this.state.filename,columns:this.state.columns,data:function(t){return new Promise((function(a,n){var s=e.state.id;console.log(s),fetch("http://localhost:8080/demo/getPagniatedDataSource?dataSourceId=".concat(e.state.id,"&page=").concat(t.page+1,"&recordCount=").concat(t.pageSize),{method:"GET"}).then((function(n){return n.json().then((function(n){console.log(n),a({data:n,page:t.page,totalCount:e.state.recordCount})}))}))}))}})})}}]),a}(l.Component);var B=function(){var e=function(){return Object(f.jsxs)("div",{children:[Object(f.jsx)(E,{}),Object(f.jsx)(h.a,{path:"/dashboard",component:I}),Object(f.jsx)(h.a,{path:"/settings",component:M}),Object(f.jsx)(h.a,{exact:!0,path:"/add-users",component:x}),Object(f.jsx)(h.a,{exact:!0,path:"/add-data",component:O}),Object(f.jsx)(h.a,{exact:!0,path:"/show-data/:id",component:H}),Object(f.jsx)(h.a,{exact:!0,path:"/profile",component:J})]})};return Object(f.jsx)("div",{children:Object(f.jsxs)(g.a,{children:[Object(f.jsx)(h.a,{exact:!0,path:"/",component:function(){return Object(f.jsx)("div",{children:Object(f.jsx)(h.a,{path:"/",component:k})})}}),Object(f.jsx)(h.a,{exact:!0,path:"/dashboard",component:e}),Object(f.jsx)(h.a,{exact:!0,path:"/settings",component:e}),Object(f.jsx)(h.a,{exact:!0,path:"/add-users",component:e}),Object(f.jsx)(h.a,{exact:!0,path:"/add-data",component:e}),Object(f.jsx)(h.a,{exact:!0,path:"/show-data/:id",component:e}),Object(f.jsx)(h.a,{exact:!0,path:"/profile",component:e})]})})},G=function(e){e&&e instanceof Function&&a.e(6).then(a.bind(null,850)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,o=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),o(e),r(e)}))};u.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(B,{})}),document.getElementById("root")),G()}},[[429,1,3]]]);
//# sourceMappingURL=main.1cb0cfd7.chunk.js.map